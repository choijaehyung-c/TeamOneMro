<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="mrone.teamone.mapper.SupplyCJH">
	<select id="getSupplyDealList" resultType="mrone.teamone.beans.RequestOrderBean" parameterType="string">
		SELECT * FROM RE WHERE RE_SPCODE = #{re_spcode} AND RE_STATE = 'OC'
	</select>
	
	<select id="getSupplyDealDetail" resultType="mrone.teamone.beans.RequestOrderDetailBean" parameterType="string">
		SELECT RD_PRSPCODE,RD_RECODE,RD_QUANTITY,PR_CODE,PR_NAME,PR_PRICE,PR_TAX 
		FROM RD INNER JOIN PR ON RD.RD_PRCODE = PR.PR_CODE WHERE RD.RD_RECODE = #{re_code} AND RD.RD_STCODE = 'OC';
	</select>
	
	<select id="getSearchSupplyDeal" resultType="mrone.teamone.beans.SupplySearchBean" parameterType="string">
		SELECT CL_CODE,CL_NAME,CL_ADDRESS,CL_CORPNUM,CL_HP,RE_CODE,RE_DATE FROM RE 
		INNER JOIN "CL" ON RE.RE_CLCODE = "CL".CL_CODE 
		WHERE CL_CODE||CL_NAME||CL_ADDRESS||CL_CORPNUM||CL_HP||RE_CODE||RE_DATE LIKE '%' || #{word} || '%'	
	</select>
	
	<select id="getSupplyCateProductList" parameterType="mrone.teamone.beans.ProductBean" resultType="mrone.teamone.beans.ProductBean">
		SELECT PR_NAME,PR_CODE,PR_PRICE,PR_STOCK FROM PR WHERE PR_SPCODE = #{pr_spcode} AND CATE = #{cate} AND PR_STCODE = 'PC'
	</select>
	
</mapper>