<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="mrone.teamone.mapper.ClientCJH">

	<select id="isClient" parameterType="mrone.teamone.beans.ClientInfoBean" resultType="int">
		SELECT COUNT(*) FROM CL WHERE CL_CODE = #{CL_CODE}
	</select>
	
	<select id="isClientPwd" parameterType="mrone.teamone.beans.ClientInfoBean" resultType="int">
		SELECT COUNT(*) FROM CL WHERE CL_PWD = #{CL_PWD}
	</select>
	
	<insert id="insClientOrder" parameterType="mrone.teamone.beans.ClientOrderBean">
		INSERT INTO OS VALUES(TO_CHAR(SYSDATE,'YYMMDD')||SEQ_CLIENT_ORDERNUMBER.NEXTVAL,#{OS_CLCODE},TO_DATE(#{OS_DATE}),#{OS_STATE})
	</insert>
	
	<insert id="insClientOrderDetail" parameterType="mrone.teamone.beans.ClientOrderBean">
		INSERT INTO OD VALUES(#{OD_PRSPCODE},#{OD_OSCODE},#{OS_STATE},#{OD_PRCODE},#{OD_QUANTITY})
	</insert>
	
	<select id="getOrderData" parameterType="mrone.teamone.beans.ClientOrderBean" resultType="string">
		SELECT OS_CODE FROM OS WHERE OS_CLCODE = #{OS_CLCODE} AND OS_DATE = TO_DATE(#{OS_DATE})
	</select>

	<select id="getTaxBillList" parameterType="mrone.teamone.beans.ClientInfoBean" resultType="mrone.teamone.beans.ClientInfoBean">
		SELECT TB_CODE,TB_OSCODE,TB_SPNAME,TB_CLNAME,TB_DATE,TB_TTPRICE FROM TB WHERE TB_CLCODE = #{CL_CODE}
	</select>
	
	<select id="getTaxBillDetail" parameterType="mrone.teamone.beans.ClientInfoBean" resultType="mrone.teamone.beans.ClientInfoBean">
		SELECT * FROM TB WHERE TB_CODE = #{TB_CODE}
	</select>
	
</mapper>